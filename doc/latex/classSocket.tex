\hypertarget{classSocket}{}\doxysection{Socket类 参考}
\label{classSocket}\index{Socket@{Socket}}


Base class for network sockets (T\+CP, U\+DP, etc.)  




{\ttfamily \#include $<$socket.\+hh$>$}



类 Socket 继承关系图\+:
% FIG 0


Socket 的协作图\+:
% FIG 1
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classSocket_ab45c9389663bd9cbd02afdd87c9611dc}{bind}} (const \mbox{\hyperlink{classAddress}{Address}} \&address)
\begin{DoxyCompactList}\small\item\em Bind a socket to a specified address with bind(2), usually for listen/accept \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSocket_a37018cb0609cd98256bd2d2739e7d3c5}{connect}} (const \mbox{\hyperlink{classAddress}{Address}} \&address)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{structConnect}{Connect}} a socket to a specified peer address with connect(2) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSocket_a55b6a988853d81f7812f3604e7dfc4c0}{shutdown}} (const int how)
\begin{DoxyCompactList}\small\item\em Shut down a socket via shutdown(2) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAddress}{Address}} \mbox{\hyperlink{classSocket_ac4abb7c7d50f79e7b358f0c8b9e36872}{local\+\_\+address}} () const
\begin{DoxyCompactList}\small\item\em Get local address of socket with getsockname(2) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAddress}{Address}} \mbox{\hyperlink{classSocket_ac84bc70e67e9a156c79052e410e6bfa3}{peer\+\_\+address}} () const
\begin{DoxyCompactList}\small\item\em Get peer address of socket with getpeername(2) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSocket_afc6ed565fddaa9d7ee4904ecc96bb6c0}{set\+\_\+reuseaddr}} ()
\begin{DoxyCompactList}\small\item\em Allow local address to be reused sooner via S\+O\+\_\+\+R\+E\+U\+S\+E\+A\+D\+DR \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSocket_a93828c96ff40034195c9ee97f4ea240e}{Socket}} (const int domain, const int type)
\begin{DoxyCompactList}\small\item\em Construct via socket(2) \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSocket_a70415b788fe6bab72252ab7a6001ec8c}{Socket}} (\mbox{\hyperlink{classFileDescriptor}{File\+Descriptor}} \&\&fd, const int domain, const int type)
\begin{DoxyCompactList}\small\item\em Construct from a file descriptor. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename option\+\_\+type $>$ }\\void \mbox{\hyperlink{classSocket_aaed9784f0b69e899124fe1f5c0ac1065}{setsockopt}} (const int level, const int option, const option\+\_\+type \&option\+\_\+value)
\begin{DoxyCompactList}\small\item\em Wrapper around setsockopt(2) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Base class for network sockets (T\+CP, U\+DP, etc.) 

\mbox{\hyperlink{classSocket}{Socket}} is generally used via a subclass. See \mbox{\hyperlink{classTCPSocket}{T\+C\+P\+Socket}} and \mbox{\hyperlink{classUDPSocket}{U\+D\+P\+Socket}} for usage examples. 

在文件 socket.\+hh 第 14 行定义.



\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classSocket_a93828c96ff40034195c9ee97f4ea240e}\label{classSocket_a93828c96ff40034195c9ee97f4ea240e}} 
\index{Socket@{Socket}!Socket@{Socket}}
\index{Socket@{Socket}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{Socket()}{Socket()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Socket\+::\+Socket (\begin{DoxyParamCaption}\item[{const int}]{domain,  }\item[{const int}]{type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Construct via socket(2) 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em domain} & is as described in socket(7), probably {\ttfamily A\+F\+\_\+\+I\+N\+ET} or {\ttfamily A\+F\+\_\+\+U\+N\+IX} \\
\hline
\mbox{\texttt{ in}}  & {\em type} & is as described in socket(7) \\
\hline
\end{DoxyParams}


在文件 socket.\+cc 第 14 行定义.

\mbox{\Hypertarget{classSocket_a70415b788fe6bab72252ab7a6001ec8c}\label{classSocket_a70415b788fe6bab72252ab7a6001ec8c}} 
\index{Socket@{Socket}!Socket@{Socket}}
\index{Socket@{Socket}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{Socket()}{Socket()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Socket\+::\+Socket (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classFileDescriptor}{File\+Descriptor}} \&\&}]{fd,  }\item[{const int}]{domain,  }\item[{const int}]{type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Construct from a file descriptor. 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em fd} & is the \mbox{\hyperlink{classFileDescriptor}{File\+Descriptor}} from which to construct \\
\hline
\mbox{\texttt{ in}}  & {\em domain} & is {\ttfamily fd}\textquotesingle{}s domain; throws std\+::runtime\+\_\+error if wrong value is supplied \\
\hline
\mbox{\texttt{ in}}  & {\em type} & is {\ttfamily fd}\textquotesingle{}s type; throws std\+::runtime\+\_\+error if wrong value is supplied \\
\hline
\end{DoxyParams}


在文件 socket.\+cc 第 20 行定义.



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classSocket_ab45c9389663bd9cbd02afdd87c9611dc}\label{classSocket_ab45c9389663bd9cbd02afdd87c9611dc}} 
\index{Socket@{Socket}!bind@{bind}}
\index{bind@{bind}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{bind()}{bind()}}
{\footnotesize\ttfamily void Socket\+::bind (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAddress}{Address}} \&}]{address }\end{DoxyParamCaption})}



Bind a socket to a specified address with bind(2), usually for listen/accept 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em address} & is a local \mbox{\hyperlink{classAddress}{Address}} to bind \\
\hline
\end{DoxyParams}


在文件 socket.\+cc 第 61 行定义.

\mbox{\Hypertarget{classSocket_a37018cb0609cd98256bd2d2739e7d3c5}\label{classSocket_a37018cb0609cd98256bd2d2739e7d3c5}} 
\index{Socket@{Socket}!connect@{connect}}
\index{connect@{connect}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily void Socket\+::connect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAddress}{Address}} \&}]{address }\end{DoxyParamCaption})}



\mbox{\hyperlink{structConnect}{Connect}} a socket to a specified peer address with connect(2) 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em address} & is the peer\textquotesingle{}s \mbox{\hyperlink{classAddress}{Address}} \\
\hline
\end{DoxyParams}


在文件 socket.\+cc 第 65 行定义.

\mbox{\Hypertarget{classSocket_ac4abb7c7d50f79e7b358f0c8b9e36872}\label{classSocket_ac4abb7c7d50f79e7b358f0c8b9e36872}} 
\index{Socket@{Socket}!local\_address@{local\_address}}
\index{local\_address@{local\_address}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{local\_address()}{local\_address()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classAddress}{Address}} Socket\+::local\+\_\+address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get local address of socket with getsockname(2) 

\begin{DoxyReturn}{返回}
the local \mbox{\hyperlink{classAddress}{Address}} of the socket 
\end{DoxyReturn}


在文件 socket.\+cc 第 54 行定义.

\mbox{\Hypertarget{classSocket_ac84bc70e67e9a156c79052e410e6bfa3}\label{classSocket_ac84bc70e67e9a156c79052e410e6bfa3}} 
\index{Socket@{Socket}!peer\_address@{peer\_address}}
\index{peer\_address@{peer\_address}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{peer\_address()}{peer\_address()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classAddress}{Address}} Socket\+::peer\+\_\+address (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get peer address of socket with getpeername(2) 

\begin{DoxyReturn}{返回}
the socket\textquotesingle{}s peer\textquotesingle{}s \mbox{\hyperlink{classAddress}{Address}} 
\end{DoxyReturn}


在文件 socket.\+cc 第 57 行定义.

\mbox{\Hypertarget{classSocket_afc6ed565fddaa9d7ee4904ecc96bb6c0}\label{classSocket_afc6ed565fddaa9d7ee4904ecc96bb6c0}} 
\index{Socket@{Socket}!set\_reuseaddr@{set\_reuseaddr}}
\index{set\_reuseaddr@{set\_reuseaddr}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{set\_reuseaddr()}{set\_reuseaddr()}}
{\footnotesize\ttfamily void Socket\+::set\+\_\+reuseaddr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Allow local address to be reused sooner via S\+O\+\_\+\+R\+E\+U\+S\+E\+A\+D\+DR 

\begin{DoxyNote}{注解}
Using {\ttfamily S\+O\+\_\+\+R\+E\+U\+S\+E\+A\+D\+DR} may reduce the robustness of your application 
\end{DoxyNote}


在文件 socket.\+cc 第 168 行定义.

\mbox{\Hypertarget{classSocket_aaed9784f0b69e899124fe1f5c0ac1065}\label{classSocket_aaed9784f0b69e899124fe1f5c0ac1065}} 
\index{Socket@{Socket}!setsockopt@{setsockopt}}
\index{setsockopt@{setsockopt}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{setsockopt()}{setsockopt()}}
{\footnotesize\ttfamily template$<$typename option\+\_\+type $>$ \\
void Socket\+::setsockopt (\begin{DoxyParamCaption}\item[{const int}]{level,  }\item[{const int}]{option,  }\item[{const option\+\_\+type \&}]{option\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Wrapper around setsockopt(2) 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em level} & The protocol level at which the argument resides \\
\hline
\mbox{\texttt{ in}}  & {\em option} & A single option to set \\
\hline
\mbox{\texttt{ in}}  & {\em option\+\_\+value} & The value to set\\
\hline
\end{DoxyParams}
See setsockopt(2) for details. 

在文件 socket.\+cc 第 162 行定义.

\mbox{\Hypertarget{classSocket_a55b6a988853d81f7812f3604e7dfc4c0}\label{classSocket_a55b6a988853d81f7812f3604e7dfc4c0}} 
\index{Socket@{Socket}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!Socket@{Socket}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily void Socket\+::shutdown (\begin{DoxyParamCaption}\item[{const int}]{how }\end{DoxyParamCaption})}



Shut down a socket via shutdown(2) 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em how} & can be {\ttfamily S\+H\+D\+N\+\_\+\+RD}, {\ttfamily S\+H\+D\+N\+\_\+\+WR}, or {\ttfamily S\+H\+D\+N\+\_\+\+R\+D\+WR}; see shutdown(2) \\
\hline
\end{DoxyParams}


在文件 socket.\+cc 第 69 行定义.



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
libsponge/util/socket.\+hh\item 
libsponge/util/socket.\+cc\end{DoxyCompactItemize}
